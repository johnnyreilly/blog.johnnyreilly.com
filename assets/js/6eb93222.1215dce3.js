"use strict";(self.webpackChunkjohnnyreilly_com=self.webpackChunkjohnnyreilly_com||[]).push([[69480],{28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>r});var n=s(96540);const i={},o=n.createContext(i);function a(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(o.Provider,{value:t},e.children)}},29379:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/azure-devops-marketplace-1bdb3a833d6a0e48a6c8840314143902.webp"},62268:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>l});var n=s(78708),i=s(74848),o=s(28453);const a={slug:"images-in-markdown-for-azure-devops-marketplace",title:"Visual Studio Marketplace: images in Markdown!",authors:"johnnyreilly",tags:["azure devops"],image:"./azure-devops-marketplace.webp",description:"Publish your README/index.md and associated images to Visual Studio Marketplace.",hide_table_of_contents:!1},r=void 0,d={image:s(76630).A,authorsImageUrls:[void 0]},l=[{value:"How can our tasks look as lovely?",id:"how-can-our-tasks-look-as-lovely",level:2},{value:"Mark(Down) our manifest",id:"markdown-our-manifest",level:2},{value:"Now the images...",id:"now-the-images",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["I've recently found myself developing ",(0,i.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/devops/extend/develop/add-build-task?view=azure-devops",children:"custom pipelines task extensions for Azure DevOps"}),". The extensions being developed end up in the ",(0,i.jsx)(t.a,{href:"https://marketplace.visualstudio.com/azuredevops",children:"Azure DevOps Marketplace"}),". What you see there when you look at existing extensions is some pretty lovely documentation."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"screenshot of a rich Markdown powered screen with images in Visual Studio Marketplace",src:s(29379).A+"",width:"600",height:"413",loading:"lazy"})}),"\n",(0,i.jsx)(t.h2,{id:"how-can-our-tasks-look-as-lovely",children:"How can our tasks look as lovely?"}),"\n",(0,i.jsx)(t.p,{children:"That, my friends, is the question to answer. Good documentation is key to success. Here's the ask: when a custom task is installed it becomes available in the marketplace, we want it to:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"contain documentation"}),"\n",(0,i.jsx)(t.li,{children:"that documentation should support images... For a picture, famously, speaks a thousand words"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"markdown-our-manifest",children:"Mark(Down) our manifest"}),"\n",(0,i.jsxs)(t.p,{children:["To get documentation showing up in the marketplace, we need to take a look at the ",(0,i.jsx)(t.code,{children:"vss-extension.json"})," file which lies at the root of our extension folder. It's a kind of manifest file and is documented ",(0,i.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/devops/extend/develop/manifest?view=azure-devops",children:"here"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.a,{href:"https://docs.microsoft.com/en-us/azure/devops/extend/develop/manifest?view=azure-devops#discovery-attributes",children:["Tucked away in the docs, you'll find mention of a ",(0,i.jsx)(t.code,{children:"content"})," property and the words:"]})}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["Dictionary of content files that describe your extension to users... Each file is assumed to be in ",(0,i.jsx)(t.a,{href:"https://help.github.com/articles/github-flavored-markdown/",children:"GitHub Flavored Markdown format"}),". The path of each item is the path to the markdown file in the extension. Valid keys: ",(0,i.jsx)(t.code,{children:"details"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["This means we can have a Markdown file in our repo which documents our task. To stay consistent with most projects, a solid choice is to use the ",(0,i.jsx)(t.code,{children:"README/index.md"})," that sits in the root of the project to this end."]}),"\n",(0,i.jsx)(t.p,{children:"So the simple addition of this:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  //...\n  "content": {\n    "details": {\n      "path": "README/index.md"\n    }\n  }\n  //...\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"Gives us documentation in the marketplace. Yay!"}),"\n",(0,i.jsx)(t.h2,{id:"now-the-images",children:"Now the images..."}),"\n",(0,i.jsxs)(t.p,{children:["If we are referencing images in our ",(0,i.jsx)(t.code,{children:"README/index.md"})," then, as it stands right now, they won't show up in the marketplace. It'll be broken link city. Imagine some Markdown like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-md",children:"![alt text](images/screenshot.png)\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This is entirely correct and supported, but won't work by default. This is because these images need to be specified in the ",(0,i.jsxs)(t.a,{href:"https://docs.microsoft.com/en-us/azure/devops/extend/develop/manifest?view=azure-devops#files",children:[(0,i.jsx)(t.code,{children:"files"})," property"]})," of the ",(0,i.jsx)(t.code,{children:"vss-extension.json"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  //...\n  "content": {\n    "details": {\n      "path": "README/index.md"\n    }\n  },\n  "files": [\n    {\n      "path": "images",\n      "addressable": true\n    }\n  ]\n  //...\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Consider the above; the ",(0,i.jsx)(t.code,{children:"path"})," of ",(0,i.jsx)(t.code,{children:"images"})," includes everything inside the ",(0,i.jsx)(t.code,{children:"images"})," folder in the task. However, it's crucial that the ",(0,i.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/devops/extend/develop/manifest?view=azure-devops#properties-1",children:(0,i.jsx)(t.code,{children:'"addressable": true'})})," is present as well. It's this that makes the files in this ",(0,i.jsx)(t.code,{children:"path"})," URL-addressable. And without that, the images won't be displayed."]}),"\n",(0,i.jsx)(t.p,{children:"That's it! We're done! We can have rich, image inclusive, documentation in our custom tasks."}),"\n",(0,i.jsxs)(t.p,{children:["A final note: it's possible to specify individual files rather than whole paths in the ",(0,i.jsx)(t.code,{children:"files"})," directory and you might want to do that if you're being very careful around file size. There is a maximum size for a custom task and it's easy to breach it. But by and large I find that \"allowlisting\" a single directory is easier."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},76630:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/azure-devops-marketplace-1bdb3a833d6a0e48a6c8840314143902.webp"},78708:e=>{e.exports=JSON.parse('{"permalink":"/images-in-markdown-for-azure-devops-marketplace","editUrl":"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2020-11-28-images-in-markdown-for-azure-devops-marketplace/index.md","source":"@site/blog/2020-11-28-images-in-markdown-for-azure-devops-marketplace/index.md","title":"Visual Studio Marketplace: images in Markdown!","description":"Publish your README/index.md and associated images to Visual Studio Marketplace.","date":"2020-11-28T00:00:00.000Z","tags":[{"inline":false,"label":"Azure DevOps","permalink":"/tags/azure-devops","description":"The Azure DevOps suite of tools."}],"readingTime":2.71,"hasTruncateMarker":true,"authors":[{"name":"John Reilly","title":"OSS Engineer - TypeScript, Azure, React, Node.js, .NET","url":"https://johnnyreilly.com/about","imageURL":"https://johnnyreilly.com/img/profile-2025.jpg","key":"johnnyreilly","page":null}],"frontMatter":{"slug":"images-in-markdown-for-azure-devops-marketplace","title":"Visual Studio Marketplace: images in Markdown!","authors":"johnnyreilly","tags":["azure devops"],"image":"./azure-devops-marketplace.webp","description":"Publish your README/index.md and associated images to Visual Studio Marketplace.","hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"azure-pipelines-task-lib and isOutput setVariable","permalink":"/azure-pipelines-task-lib-and-isoutput-setvariable"},"nextItem":{"title":"Bulletproof uniq with TypeScript generics (yay code reviews!)","permalink":"/bulletproof-uniq-with-typescript"}}')}}]);