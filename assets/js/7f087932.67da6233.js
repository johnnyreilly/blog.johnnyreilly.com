"use strict";(self.webpackChunkjohnnyreilly_com=self.webpackChunkjohnnyreilly_com||[]).push([[40413],{3905:(t,e,a)=>{a.d(e,{Zo:()=>l,kt:()=>m});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var u=n.createContext({}),c=function(t){var e=n.useContext(u),a=e;return t&&(a="function"==typeof t?t(e):s(s({},e),t)),a},l=function(t){var e=c(t.components);return n.createElement(u.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},h=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,o=t.originalType,u=t.parentName,l=i(t,["components","mdxType","originalType","parentName"]),p=c(a),h=r,m=p["".concat(u,".").concat(h)]||p[h]||d[h]||o;return a?n.createElement(m,s(s({ref:e},l),{},{components:a})):n.createElement(m,s({ref:e},l))}));function m(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=a.length,s=new Array(o);s[0]=h;var i={};for(var u in e)hasOwnProperty.call(e,u)&&(i[u]=e[u]);i.originalType=t,i[p]="string"==typeof t?t:r,s[1]=i;for(var c=2;c<o;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},27699:(t,e,a)=>{a.d(e,{Z:()=>r});var n=a(67294);function r(t){const e={"@context":"https://schema.org","@type":"FAQPage",mainEntity:t.faqs.map((t=>({"@type":"Question",name:t.question,acceptedAnswer:{"@type":"Answer",text:t.answer}})))};return n.createElement(n.Fragment,null,n.createElement("script",{type:"application/ld+json"},JSON.stringify(e)),n.createElement("h2",null,"FAQs"),e.mainEntity.map((t=>n.createElement(n.Fragment,{key:t.name},n.createElement("h3",null,t.name),t.acceptedAnswer.text))))}},30099:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>p,contentTitle:()=>c,default:()=>f,faqs:()=>h,frontMatter:()=>u,metadata:()=>l,toc:()=>d});a(67294);var n=a(3905),r=a(27699);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})),t}function i(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}const u={slug:"docusaurus-structured-data-faqs-mdx",title:"Docusaurus: Structured Data FAQs with MDX",authors:"johnnyreilly",tags:["Docusaurus","Structured Data"],image:"./title-image.png",description:"This demos how to make an MDX component that renders FAQs into a page, and the same information as Structured Data. It also shows how to use it with Docusaurus.",hide_table_of_contents:!1},c=void 0,l={permalink:"/docusaurus-structured-data-faqs-mdx",editUrl:"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2023-04-08-docusaurus-structured-data-faqs-mdx/index.md",source:"@site/blog/2023-04-08-docusaurus-structured-data-faqs-mdx/index.md",title:"Docusaurus: Structured Data FAQs with MDX",description:"This demos how to make an MDX component that renders FAQs into a page, and the same information as Structured Data. It also shows how to use it with Docusaurus.",date:"2023-04-08T00:00:00.000Z",formattedDate:"April 8, 2023",tags:[{label:"Docusaurus",permalink:"/tags/docusaurus"},{label:"Structured Data",permalink:"/tags/structured-data"}],readingTime:6.17,hasTruncateMarker:!0,authors:[{name:"John Reilly",title:"OSS Engineer - TypeScript, Azure, React, Node.js, .NET",url:"https://johnnyreilly.com/about",imageURL:"https://johnnyreilly.com/img/profile.jpg",key:"johnnyreilly"}],frontMatter:{slug:"docusaurus-structured-data-faqs-mdx",title:"Docusaurus: Structured Data FAQs with MDX",authors:"johnnyreilly",tags:["Docusaurus","Structured Data"],image:"./title-image.png",description:"This demos how to make an MDX component that renders FAQs into a page, and the same information as Structured Data. It also shows how to use it with Docusaurus.",hide_table_of_contents:!1},prevItem:{title:"Teams Direct Message API with Power Automate",permalink:"/ms-teams-direct-message-api"},nextItem:{title:"Bicep user defined types and Bash single item arrays",permalink:"/bicep-user-defined-types-and-bash-single-item-arrays"}},p={image:a(96607).Z,authorsImageUrls:[void 0]},d=[{value:"FAQs and Structured Data",id:"faqs-and-structured-data",level:2},{value:"The FAQStructuredData MDX component",id:"the-faqstructureddata-mdx-component",level:2},{value:"Importing our MDX component",id:"importing-our-mdx-component",level:2},{value:"Testing the Structured Data",id:"testing-the-structured-data",level:2},{value:"Conclusion",id:"conclusion",level:2}],h=[{question:"How do I use the FAQ Structured Data component?",answer:"Simply create an import statement for the component and then use it in your MDX file. You'll need to pass in an array of FAQs. This array can be inline, you can declare it as a variable, or you can import it from another file."},{question:"How do I use the FAQ Structured Data component in a blog post?",answer:"The usage is the same as in a regular MDX file. But the import statement will sit after the frontmatter of the blog post."},{question:"Can I use the FAQ Structured Data component in a regular MD file?",answer:"Yes! It just works\u2122\ufe0f."}],m={toc:d,faqs:h};function f(t){var{components:e}=t,u=i(t,["components"]);return(0,n.kt)("wrapper",s(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){o(t,e,a[e])}))}return t}({},m,u),{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"I've written previously about ",(0,n.kt)("a",{parentName:"p",href:"/structured-data-seo-and-react"},"using Structured Data with React"),". This post goes a little further and talks about how to use Structured Data with Docusaurus and MDX. More specifically it looks at how to create a component that both renders FAQs into a page, and the same information as Structured Data."),(0,n.kt)("p",null,(0,n.kt)("img",{loading:"eager",fetchpriority:"high",alt:"title image reading &quot;Docusaurus: Structured Data FAQs with MDX&quot; with a Docusaurus logo",src:a(96607).Z,width:"800",height:"450"})),(0,n.kt)("h2",{id:"faqs-and-structured-data"},"FAQs and Structured Data"),(0,n.kt)("p",null,"I've been working with ",(0,n.kt)("a",{parentName:"p",href:"https://growtika.com/"},"Growtika")," to repair my SEO after ",(0,n.kt)("a",{parentName:"p",href:"/how-i-ruined-my-seo"},"shredding it somehow last year"),". One of the experiments we ran was to add ",(0,n.kt)("a",{parentName:"p",href:"/migrating-from-github-pages-to-azure-static-web-apps"},"FAQs to a post"),", and with that, the equivalent FAQ Structured Data. The intent being to see if this would help with the SEO for that post."),(0,n.kt)("p",null,"My blog is written in ",(0,n.kt)("a",{parentName:"p",href:"https://mdxjs.com/"},"MDX"),", and hosted on ",(0,n.kt)("a",{parentName:"p",href:"https://docusaurus.io/"},"Docusaurus"),". I wanted to see if I could create an MDX component that would render the FAQs into a page, and the same information as Structured Data. The ",(0,n.kt)("a",{parentName:"p",href:"https://docusaurus.io/docs/markdown-features/react"},"Docusaurus docs suggested this was feasible"),", and I wanted to see if I could make it work."),(0,n.kt)("p",null,"And it turns out that other people are interested in this too; there's a feature request on ",(0,n.kt)("a",{parentName:"p",href:"https://docusaurus.io/feature-requests/p/creation-of-structured-faq"},"Docusaurus's Canny")," for exactly this."),(0,n.kt)("p",null,"So I created a component that could be used to render FAQs into a page as markdown, and the same information as Structured Data. I thought it would be useful to share that component with the world. Hello world, herewith the component:"),(0,n.kt)("h2",{id:"the-faqstructureddata-mdx-component"},"The FAQStructuredData MDX component"),(0,n.kt)("p",null,"I created a directory called ",(0,n.kt)("inlineCode",{parentName:"p"},"FAQStructuredData")," in the `",(0,n.kt)("inlineCode",{parentName:"p"},"src/theme/MDXComponents")," directory. This directory is where I keep my custom MDX components. I then created an ",(0,n.kt)("inlineCode",{parentName:"p"},"index.js")," file in that directory. This is the file that contains the component:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/theme/MDXComponents/FAQStructuredData/index.js"',title:'"src/theme/MDXComponents/FAQStructuredData/index.js"'},"/**\n * @typedef { import('./types').FAQStructuredDataProps } FAQStructuredDataProps\n * @typedef { import('./types').FAQStructuredData } FAQStructuredData\n */\n\nimport React from 'react';\n\n/**\n * A component that renders a FAQ structured data and markdown entries\n *\n * @see https://developers.google.com/search/docs/appearance/structured-data/faqpage\n * @param {FAQStructuredDataProps} props\n * @returns\n */\nexport default function FAQStructuredData(props) {\n  /** @type {FAQStructuredData} */ const faqStructuredData = {\n    '@context': 'https://schema.org',\n    '@type': 'FAQPage',\n    mainEntity: props.faqs.map((faq) => ({\n      '@type': 'Question',\n      name: faq.question,\n      acceptedAnswer: {\n        '@type': 'Answer',\n        text: faq.answer,\n      },\n    })),\n  };\n  return (\n    <>\n      <script type=\"application/ld+json\">\n        {JSON.stringify(faqStructuredData)}\n      <\/script>\n\n      <h2>FAQs</h2>\n      {faqStructuredData.mainEntity.map((faq) => (\n        <React.Fragment key={faq.name}>\n          <h3>{faq.name}</h3>\n          {faq.acceptedAnswer.text}\n        </React.Fragment>\n      ))}\n    </>\n  );\n}\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/theme/MDXComponents/FAQStructuredData/types.d.ts"',title:'"src/theme/MDXComponents/FAQStructuredData/types.d.ts"'},"export interface FAQ {\n  question: string;\n  answer: string;\n}\n\nexport interface FAQStructuredDataProps {\n  faqs: FAQ[];\n}\n\nexport interface FAQStructuredData {\n  '@context': string;\n  '@type': string;\n  mainEntity: FAQQuestionStructuredData[];\n}\n\nexport interface FAQQuestionStructuredData {\n  '@type': 'Question';\n  name: string;\n  acceptedAnswer: {\n    '@type': 'Answer';\n    text: string;\n  };\n}\n")),(0,n.kt)("p",null,"Some things to note about this component:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The code is written in JavaScript, but it's using ",(0,n.kt)("a",{parentName:"li",href:"/typescript-vs-jsdoc-javascript"},"TypeScript types via JSDoc"),". I don't believe you can write MDX components in TypeScript (please someone let me know if it turns out this is possible). But static typing is useful, and still possible thanks to JSDoc."),(0,n.kt)("li",{parentName:"ul"},"On that, we have a ",(0,n.kt)("inlineCode",{parentName:"li"},"types.d.ts")," file that contains the types for the component. Using TypeScript directly is still possible alongside JSDoc, as long as there is no runtime code in the file, and a definition file (which the ",(0,n.kt)("inlineCode",{parentName:"li"},"types.d.ts")," file is), has no runtime code. We can simply use it to store types that we import into the component."),(0,n.kt)("li",{parentName:"ul"},"The component expects an ",(0,n.kt)("inlineCode",{parentName:"li"},"faqs")," prop. This is an array of FAQs. Each FAQ is an object with a ",(0,n.kt)("inlineCode",{parentName:"li"},"question")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"answer")," property. The component then renders the FAQs as markdown, and the same information as JSON-LD Structured Data. We're using the Google guidelines for ",(0,n.kt)("a",{parentName:"li",href:"https://developers.google.com/search/docs/appearance/structured-data/faqpage#examples"},"FAQ Structured Data"),"."),(0,n.kt)("li",{parentName:"ul"},"The component renders a ",(0,n.kt)("inlineCode",{parentName:"li"},"h2"),' tag titled "FAQs". Under that, each FAQ is rendered with a ',(0,n.kt)("inlineCode",{parentName:"li"},"h3")," tag and the answer sits directly below it.")),(0,n.kt)("h2",{id:"importing-our-mdx-component"},"Importing our MDX component"),(0,n.kt)("p",null,"Now the ",(0,n.kt)("inlineCode",{parentName:"p"},"FAQStructuredData")," component is created, we can use it in our MDX (or straight MD) files. We can import the component and create an array called ",(0,n.kt)("inlineCode",{parentName:"p"},"faqs")," like so:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-mdx"},"---\nslug: docusaurus-structured-data-faqs-mdx\ntitle: 'Docusaurus: Structured Data FAQs with MDX'\nauthors: johnnyreilly\ntags: [Docusaurus, Structured Data]\nimage: ./title-image.png\ndescription: 'This demos how to make an MDX component that renders FAQs into a page, and the same information as Structured Data. It also shows how to use it with Docusaurus.'\nhide_table_of_contents: false\n---\n\nimport FAQStructuredData from '../../src/theme/MDXComponents/FAQStructuredData';\n\nexport const faqs = [\n  {\n    question: 'How do I use the FAQ Structured Data component?',\n    answer:\n      \"Simply create an import statement for the component and then use it in your MDX file. You'll need to pass in an array of FAQs. This array can be inline, you can declare it as a variable, or you can import it from another file.\",\n  },\n  {\n    question: 'How do I use the FAQ Structured Data component in a blog post?',\n    answer:\n      'The usage is the same as in a regular MDX file. But the import statement will sit after the frontmatter of the blog post.',\n  },\n  {\n    question:\n      'Can I use the FAQ Structured Data component in a regular MD file?',\n    answer: 'Yes! It just works\u2122\ufe0f.',\n  },\n];\n\n;\n")),(0,n.kt)("p",null,"Note we're doing this in a blog post and the import statement is after the frontmatter. Then we can use the component like so:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-mdx"},"<FAQStructuredData faqs={faqs} />\n")),(0,n.kt)("p",null,"We'll do that, right here, right now:"),(0,n.kt)(r.Z,{faqs:h,mdxType:"FAQStructuredData"}),(0,n.kt)("h2",{id:"testing-the-structured-data"},"Testing the Structured Data"),(0,n.kt)("p",null,"You can see, we have FAQs rendered in the body of our blog post. If we put the URL of the post into the ",(0,n.kt)("a",{parentName:"p",href:"https://search.google.com/test/rich-results?url=https%3A%2F%2Fjohnnyreilly.com%2Fdocusaurus-structured-data-faqs-mdx"},"Google Structured Data Testing Tool"),", we can see that the Structured Data is being rendered correctly:"),(0,n.kt)("p",null,(0,n.kt)("img",{loading:"lazy",alt:"Screenshot of rich results test showing FAQs are detected",src:a(70543).Z,width:"686",height:"259"})),(0,n.kt)("p",null,'We can even go one better, shortly after I posted this article, I did a search in Google for "how do you have Docusaurus with Structured Data FAQs with MDX" and I got this:'),(0,n.kt)("p",null,(0,n.kt)("img",{loading:"lazy",alt:"A screenshot of the Google search window with the search &#39;how do you have Docusaurus with Structured Data FAQs with MDX&#39; and the FAQs showing up as a featured snippet",src:a(51058).Z,width:"889",height:"445"})),(0,n.kt)("p",null,"That's our FAQs being surfaced as a ",(0,n.kt)("a",{parentName:"p",href:"https://support.google.com/websearch/answer/9351707?hl=en-GB&visit_id=638180439903372599-4066254776&p=featured_snippets&rd=1#zippy=%2Cwhy-featured-snippets-may-be-removed"},"featured snippet"),". Nice!"),(0,n.kt)("h2",{id:"conclusion"},"Conclusion"),(0,n.kt)("p",null,"We've now got a reusable FAQs component that renders the FAQs as markdown, and the same information as Structured Data. We can use it in our MDX files, and we can use it in our blog posts. We can also use it in regular MD files. Yay! I've only used this in the context of Docusaurus, but I suspect it can be used in other contexts too."),(0,n.kt)("p",null,"I'd rather like it if this was built into Docusaurus, and if it could read directly from the Markdown files. But this is a good start. I hope you find it useful."))}f.isMDXComponent=!0},51058:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/screenshot-featured-snippets-faqs-9fc55a288126bae232305c9c43f19194.webp"},70543:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/screenshot-rich-results-test-c50a3d132af9bb640a6a9dc706b85ac3.webp"},96607:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/title-image-1744a099fb4f8f7d7022a2936756dcb7.png"}}]);