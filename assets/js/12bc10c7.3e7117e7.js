"use strict";(self.webpackChunkjohnnyreilly_com=self.webpackChunkjohnnyreilly_com||[]).push([[48441],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=c(n),d=o,h=p["".concat(u,".").concat(d)]||p[d]||g[d]||i;return n?r.createElement(h,a(a({ref:t},l),{},{components:n})):r.createElement(h,a({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[p]="string"==typeof e?e:o,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},68257:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>u,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>p});n(67294);var r=n(3905);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const s={slug:"debugging-azure-functions-vs-code-mac-os",title:"Debugging Azure Functions in VS Code on Mac OS",authors:"johnnyreilly",tags:["Azure Functions","VS Code"],image:"./title-image.png",description:"The VS Code debugging mechanism for Azure Functions on Mac OS frequently breaks. This post documents an approach to get it working.",hide_table_of_contents:!1},u=void 0,c={permalink:"/debugging-azure-functions-vs-code-mac-os",editUrl:"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2022-11-11-debugging-azure-functions-vs-code-mac-os/index.md",source:"@site/blog/2022-11-11-debugging-azure-functions-vs-code-mac-os/index.md",title:"Debugging Azure Functions in VS Code on Mac OS",description:"The VS Code debugging mechanism for Azure Functions on Mac OS frequently breaks. This post documents an approach to get it working.",date:"2022-11-11T00:00:00.000Z",formattedDate:"November 11, 2022",tags:[{label:"Azure Functions",permalink:"/tags/azure-functions"},{label:"VS Code",permalink:"/tags/vs-code"}],readingTime:2.08,hasTruncateMarker:!0,authors:[{name:"John Reilly",title:"OSS Engineer - TypeScript, Azure, React, Node.js, .NET",url:"https://johnnyreilly.com/about",imageURL:"https://johnnyreilly.com/img/profile.jpg",key:"johnnyreilly"}],frontMatter:{slug:"debugging-azure-functions-vs-code-mac-os",title:"Debugging Azure Functions in VS Code on Mac OS",authors:"johnnyreilly",tags:["Azure Functions","VS Code"],image:"./title-image.png",description:"The VS Code debugging mechanism for Azure Functions on Mac OS frequently breaks. This post documents an approach to get it working.",hide_table_of_contents:!1},prevItem:{title:"Azure AD Claims with Static Web Apps and Azure Functions",permalink:"/azure-ad-claims-static-web-apps-azure-functions"},nextItem:{title:"Getting started with the Web Monetization API",permalink:"/web-monetization-api"}},l={image:n(73847).Z,authorsImageUrls:[void 0]},p=[{value:"The problem",id:"the-problem",level:2},{value:"The workaround",id:"the-workaround",level:2}],g={toc:p};function d(e){var{components:t}=e,s=a(e,["components"]);return(0,r.kt)("wrapper",i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},g,s),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"VS Code's debugging mechanism for Azure Functions on Mac OS frequently breaks. This post documents an approach to get it working."),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"eager",fetchpriority:"high",alt:"title image reading &quot;Debugging Azure Functions in VS Code on Mac OS&quot; with Docusaurus, SWC and webpack logos",src:n(73847).Z,width:"800",height:"450"})),(0,r.kt)("h2",{id:"the-problem"},"The problem"),(0,r.kt)("p",null,"I frequently use a Mac to develop Azure Functions. I use VS Code as my editor."),(0,r.kt)("p",null,"Debugging is can be very useful when you're developing; getting to understand what the computer can see at runtime is a superpower. Regrettably with Azure Functions, I often find that the debugger fails to attach. When this happens, I can't actually debug my Azure Functions."),(0,r.kt)("p",null,"This is a known issue. In fact, this blog post is me sharing a workaround that I've needed again and again, but keep losing. Not my own work, the work of ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/basilfx"},"Bas Stottelaar"),". I share it as a public service announcement - and to remind myself how to do it! ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OmniSharp/omnisharp-vscode/issues/4903#issuecomment-993015843"},"The original issue (and workaround) is here"),". Yay Bas!"),(0,r.kt)("p",null,"There appears to be something wrong with the standard code signing of ",(0,r.kt)("inlineCode",{parentName:"p"},"vsdbg")," and / or ",(0,r.kt)("inlineCode",{parentName:"p"},"vsdbg-ui"),". The workaround is to sign the binaries yourself."),(0,r.kt)("h2",{id:"the-workaround"},"The workaround"),(0,r.kt)("p",null,"You'll first need to generate a self signed certificate to be used for code signing. ",(0,r.kt)("a",{parentName:"p",href:"https://stackoverflow.com/a/58363510/761388"},"There's a good resource on Stack Overflow covering this"),". You should only ever need to do this once. You can then use the same certificate every time you apply the workaround."),(0,r.kt)("p",null,"In fact it's probably worth emphasising that you'll likely need to apply this workaround again and again. It's not a permanent fix. The workaround script that you need to run is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/.vscode/extensions/ms-dotnettools.csharp-1.25.2-darwin-x64/.debugger/x86_64\ncodesign --remove-signature vsdbg-ui && codesign --remove-signature vsdbg\ncodesign -s my-codesign-cert vsdbg-ui && codesign -s my-codesign-cert vsdbg\n")),(0,r.kt)("p",null,"A thing to note about the above is the version in the path. You'll need to change that to match the version of the C# extension that you have installed. You can find the version in the VS Code extensions view:"),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"lazy",alt:"Screenshot of C# extension in VS Code; in this case version 1.25.2",src:n(55471).Z,width:"1104",height:"344"})),(0,r.kt)("p",null,"In this case the version is ",(0,r.kt)("inlineCode",{parentName:"p"},"1.25.2"),"; as is reflected in the path above."),(0,r.kt)("p",null,'Once the script has been run, I\'ve found that restarting VS Code is a good idea. Regrettably the "I cannot debug my Azure Functions" issue is likely to reoccur in future. When it does, the workaround will need to be reapplied.'),(0,r.kt)("p",null,"In the long term, I'd love to see some debugging improvements for Azure Functions. Until that time, we have this."))}d.isMDXComponent=!0},55471:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/screenshot-csharp-extension-vs-code-db10e4b244a489b94ba27076ddbfdf3b.webp"},73847:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/title-image-5df2b9bf726270716f542cfad893c18a.png"}}]);