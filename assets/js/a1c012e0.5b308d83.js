"use strict";(self.webpackChunkjohnnyreilly_com=self.webpackChunkjohnnyreilly_com||[]).push([[29798],{28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>r});var n=i(96540);const a={},o=n.createContext(a);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(o.Provider,{value:t},e.children)}},46922:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/title-image-99eeb529f7c75744d9f6863f82b04880.png"},74065:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/title-image-99eeb529f7c75744d9f6863f82b04880.png"},82183:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>p});var n=i(92113),a=i(74848),o=i(28453);const s={slug:"azure-container-apps-bicep-managed-certificates-custom-domains",title:"Azure Container Apps, Bicep, managed certificates and custom domains",authors:"johnnyreilly",tags:["azure container apps","bicep"],image:"./title-image.png",description:"Azure Container Apps support managed certificates and custom domains. However, deploying them with Bicep is not straightforward. This post explains how to do it.",hide_table_of_contents:!1},r=void 0,c={image:i(74065).A,authorsImageUrls:[void 0]},p=[];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",img:"img",p:"p",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Azure Container Apps support managed certificates and custom domains. However, deploying them with Bicep is not straightforward - although it is possible. It seems likely there's a bug in the implementation in Azure, but I'm not sure. Either way, it's possible to deploy managed certificates and custom domains using Bicep. You just need to know how."}),"\n",(0,a.jsxs)(t.p,{children:['If, instead, you\'re looking to make use of the "bring your own certificates" approach in Azure Container Apps using Bicep, then you might want to take a look at ',(0,a.jsx)(t.a,{href:"/azure-container-apps-bicep-bring-your-own-certificates-custom-domains",children:"this post on the topic"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"I've facetiously subtitled this post \"a three pipe(line) problem\" because it took three Azure Pipelines to get it working. This is not Azure Pipelines specific though, it's just that I was using Azure Pipelines to deploy the Bicep. Really, this applies to any way of deploying Bicep. GitHub Actions, Azure CLI or whatever."}),"\n",(0,a.jsx)(t.p,{children:"If you're here because you've encountered the dread message:"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"Creating managed certificate requires hostname '....' added as a custom hostname to a container app in environment 'caenv-appname-dev'"})}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Then you're in the right place. I'm going to explain how to get past that error message and get your custom domain working with your Azure Container App whilst still using Bicep. It's going to get ugly. But it will work."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"title image reading &quot;Azure Container Apps, Bicep, managed certificates and custom domains&quot; with the Azure Container App logos",src:i(46922).A+"",width:"800",height:"450",loading:"lazy"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},92113:e=>{e.exports=JSON.parse('{"permalink":"/azure-container-apps-bicep-managed-certificates-custom-domains","editUrl":"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2023-06-18-azure-container-apps-bicep-managed-certificates-custom-domains/index.md","source":"@site/blog/2023-06-18-azure-container-apps-bicep-managed-certificates-custom-domains/index.md","title":"Azure Container Apps, Bicep, managed certificates and custom domains","description":"Azure Container Apps support managed certificates and custom domains. However, deploying them with Bicep is not straightforward. This post explains how to do it.","date":"2023-06-18T00:00:00.000Z","tags":[{"inline":false,"label":"Azure Container Apps","permalink":"/tags/azure-container-apps","description":"The Azure Container Apps service. Effectively a managed Kubernetes service."},{"inline":false,"label":"Bicep","permalink":"/tags/bicep","description":"The Bicep language for Azure Resource Manager templates."}],"readingTime":6.2,"hasTruncateMarker":true,"authors":[{"name":"John Reilly","title":"OSS Engineer - TypeScript, Azure, React, Node.js, .NET","url":"https://johnnyreilly.com/about","imageURL":"https://johnnyreilly.com/img/profile.jpg","key":"johnnyreilly","page":null}],"frontMatter":{"slug":"azure-container-apps-bicep-managed-certificates-custom-domains","title":"Azure Container Apps, Bicep, managed certificates and custom domains","authors":"johnnyreilly","tags":["azure container apps","bicep"],"image":"./title-image.png","description":"Azure Container Apps support managed certificates and custom domains. However, deploying them with Bicep is not straightforward. This post explains how to do it.","hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"TypeScript 5.1: declaring JSX element types","permalink":"/typescript-5-1-declaring-jsx-element-types"},"nextItem":{"title":"Azure Container Apps, Easy Auth and .NET authentication","permalink":"/azure-container-apps-easy-auth-and-dotnet-authentication"}}')}}]);