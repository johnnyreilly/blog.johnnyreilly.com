"use strict";(self.webpackChunkjohnnyreilly_com=self.webpackChunkjohnnyreilly_com||[]).push([[94597],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var u=r.createContext({}),l=function(e){var t=r.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,u=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=l(a),g=n,h=d["".concat(u,".").concat(g)]||d[g]||p[g]||o;return a?r.createElement(h,s(s({ref:t},c),{},{components:a})):r.createElement(h,s({ref:t},c))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,s=new Array(o);s[0]=g;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[d]="string"==typeof e?e:n,s[1]=i;for(var l=2;l<o;l++)s[l]=a[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}g.displayName="MDXCreateElement"},61860:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>d});a(67294);var r=a(3905);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}const i={slug:"docusaurus-blogs-adding-breadcrumb-structured-data",title:"Docusaurus blogs: adding breadcrumb Structured Data",authors:"johnnyreilly",tags:["Docusaurus","Structured Data","SEO"],image:"./title-image.png",description:"Docusaurus blogs can add breadcrumb Structured Data to their blog posts. This post shows how to add it using the JSON-LD format.",hide_table_of_contents:!1},u=void 0,l={permalink:"/docusaurus-blogs-adding-breadcrumb-structured-data",editUrl:"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2023-02-05-docusaurus-blogs-adding-breadcrumb-structured-data/index.md",source:"@site/blog/2023-02-05-docusaurus-blogs-adding-breadcrumb-structured-data/index.md",title:"Docusaurus blogs: adding breadcrumb Structured Data",description:"Docusaurus blogs can add breadcrumb Structured Data to their blog posts. This post shows how to add it using the JSON-LD format.",date:"2023-02-05T00:00:00.000Z",formattedDate:"February 5, 2023",tags:[{label:"Docusaurus",permalink:"/tags/docusaurus"},{label:"Structured Data",permalink:"/tags/structured-data"},{label:"SEO",permalink:"/tags/seo"}],readingTime:5.715,hasTruncateMarker:!0,authors:[{name:"John Reilly",title:"OSS Engineer - TypeScript, Azure, React, Node.js, .NET",url:"https://johnnyreilly.com/about",imageURL:"https://johnnyreilly.com/img/profile.jpg",key:"johnnyreilly"}],frontMatter:{slug:"docusaurus-blogs-adding-breadcrumb-structured-data",title:"Docusaurus blogs: adding breadcrumb Structured Data",authors:"johnnyreilly",tags:["Docusaurus","Structured Data","SEO"],image:"./title-image.png",description:"Docusaurus blogs can add breadcrumb Structured Data to their blog posts. This post shows how to add it using the JSON-LD format.",hide_table_of_contents:!1},prevItem:{title:"In defence of pull requests",permalink:"/in-defence-of-pull-requests"},nextItem:{title:"Migrating from GitHub Pages to Azure Static Web Apps",permalink:"/migrating-from-github-pages-to-azure-static-web-apps"}},c={image:a(11954).Z,authorsImageUrls:[void 0]},d=[{value:"What are breadcrumbs?",id:"what-are-breadcrumbs",level:2},{value:"Adding a breadcrumb to a blog post",id:"adding-a-breadcrumb-to-a-blog-post",level:2},{value:"Adding a breadcrumb to the blog archive page",id:"adding-a-breadcrumb-to-the-blog-archive-page",level:2},{value:"Adding a breadcrumb to the blog post page",id:"adding-a-breadcrumb-to-the-blog-post-page",level:2},{value:"Using the Rich Results test to validate the breadcrumbs",id:"using-the-rich-results-test-to-validate-the-breadcrumbs",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:d};function g(e){var{components:t}=e,i=s(e,["components"]);return(0,r.kt)("wrapper",o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){n(e,t,a[t])}))}return e}({},p,i),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"By default, Docusaurus blogs don't add breadcrumb Structured Data to their blog posts. It's not hard to make it happen though; this post shows how to add it using the JSON-LD format."),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"eager",fetchpriority:"high",alt:"title image reading &quot;Docusaurus blogs: adding breadcrumb Structured Data&quot; with the Docusaurus logo",src:a(11954).Z,width:"800",height:"450"})),(0,r.kt)("h2",{id:"what-are-breadcrumbs"},"What are breadcrumbs?"),(0,r.kt)("p",null,"Take a look at this:"),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"lazy",alt:"screenshot of Google search results with a highlighted breadcrumb",src:a(52410).Z,width:"954",height:"327"})),(0,r.kt)("p",null,"What you're looking at is a ",(0,r.kt)("a",{parentName:"p",href:"/directory-build-props-c-sharp-9-for-all"},"blog post of mine"),' showing up in Google search results. Significantly, it has a breadcrumb which I\'ve highlighted. It indicates that the blog post sits under the blogs "Archive" page, which in turn sits under the home page of the site.'),(0,r.kt)("p",null,"This breadcrumb was driven by Structured Data that my blog surfaces. Structured Data is a form of metadata that is intended to be easily machine readable; and consequently helpful to search engines like Google. Now, what is a breadcrumb to Google?"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Google Search uses breadcrumb markup in the body of a web page to categorize the information from the page in search results.")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developers.google.com/search/docs/appearance/structured-data/breadcrumb"},"You can read more on breadcrumbs in the Google documentation"),". This post is about how to add breadcrumbs to your Docusaurus blog posts, to help Google categorise your blog posts."),(0,r.kt)("p",null,"It's worth noting that what we're going to do here is add a JSON-LD Structured Data breadcrumb to the blog post. There's going to be no physical breadcrumb on the page itself. It could be nice to add a physical breadcrumb, but that's not what we're going to do here as it would not be a trivial addition. (As an aside, Docusaurus does use physical breadcrumbs in its documentation pages; which surface Structured Data.)"),(0,r.kt)("p",null,"Docusaurus already has Structured Data support for blog posts; ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/facebook/docusaurus/pull/5322"},"in fact I had a hand in that"),". I like me some Structured Data \ud83d\ude09. The existing Structured Data is article / ",(0,r.kt)("inlineCode",{parentName:"p"},"BlogPosting")," metadata. We're going to enrich the Structured Data for blog posts by adding a ",(0,r.kt)("inlineCode",{parentName:"p"},"BreadcrumbList")," as well."),(0,r.kt)("p",null,"Incidentally, if you'd like to learn more about React, JSON-LD and Structured Data, I've ",(0,r.kt)("a",{parentName:"p",href:"/structured-data-seo-and-react"},"written about it, and done a short talk on the topic"),"."),(0,r.kt)("h2",{id:"adding-a-breadcrumb-to-a-blog-post"},"Adding a breadcrumb to a blog post"),(0,r.kt)("p",null,"With all that preamble out of the way, let's get to the good stuff. We're going to add a breadcrumb to a blog post. To do that, we need to adjust two components in Docusaurus; the ",(0,r.kt)("inlineCode",{parentName:"p"},"BlogArchivePage")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"BlogPostPage"),". We're going to do this by swizzling. Let's crack open the terminal and get started:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run swizzle @docusaurus/theme-classic BlogArchivePage -- --wrap --danger\nnpm run swizzle @docusaurus/theme-classic BlogPostPage -- --wrap --danger\n")),(0,r.kt)("p",null,"This will create two files in the ",(0,r.kt)("inlineCode",{parentName:"p"},"src/theme/")," directory:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"src/theme/BlogArchivePage/index.js")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"src/theme/BlogPostPage/index.js"))),(0,r.kt)("p",null,"You'll note from the command that we've used the ",(0,r.kt)("inlineCode",{parentName:"p"},"--wrap")," flag. This is because we want to wrap the existing component. If we didn't use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--wrap")," flag, we'd be replacing the existing component. We're wrapping rather than replacing as it will make maintenance easier as Docusaurus evolves."),(0,r.kt)("h2",{id:"adding-a-breadcrumb-to-the-blog-archive-page"},"Adding a breadcrumb to the blog archive page"),(0,r.kt)("p",null,"We're now going to replace the generated ",(0,r.kt)("inlineCode",{parentName:"p"},"BlogArchivePage")," component with the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport BlogArchivePage from '@theme-original/BlogArchivePage';\nimport useDocusaurusContext from '@docusaurus/useDocusaurusContext';\n\nexport default function BlogArchivePageWrapper(props) {\n  const { siteConfig } = useDocusaurusContext();\n\n  // https://developers.google.com/search/docs/appearance/structured-data/breadcrumb#json-ld\n  const breadcrumbStructuredData = {\n    '@context': 'https://schema.org',\n    '@type': 'BreadcrumbList',\n    name: 'Archive breadcrumb',\n    itemListElement: [\n      {\n        '@type': 'ListItem',\n        position: 1,\n        name: 'Home',\n        item: siteConfig.url,\n      },\n      {\n        '@type': 'ListItem',\n        position: 2,\n        name: 'Archive',\n      },\n    ],\n  };\n\n  return (\n    <>\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify(breadcrumbStructuredData),\n        }}\n      />\n      <BlogArchivePage {...props} />\n    </>\n  );\n}\n")),(0,r.kt)("p",null,"Here we're constructing a JSON-LD Structured Data object that represents a breadcrumb. We're then adding it to the page as a script tag with the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," of ",(0,r.kt)("inlineCode",{parentName:"p"},"application/ld+json"),". And we're rendering the wrapped ",(0,r.kt)("inlineCode",{parentName:"p"},"BlogArchivePage")," component. This is so that we can add the Structured Data breadcrumb to the page without having to duplicate the existing code."),(0,r.kt)("p",null,"There's two entries in the ",(0,r.kt)("inlineCode",{parentName:"p"},"itemListElement")," array. The first is the home page of the site. The second is the archive page itself. We're not going to add a link to the archive page as it's the current page."),(0,r.kt)("h2",{id:"adding-a-breadcrumb-to-the-blog-post-page"},"Adding a breadcrumb to the blog post page"),(0,r.kt)("p",null,"Okay, one down - one to go. We're now going to replace the generated ",(0,r.kt)("inlineCode",{parentName:"p"},"BlogPostPage")," component with the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport BlogPostPage from '@theme-original/BlogPostPage';\nimport useDocusaurusContext from '@docusaurus/useDocusaurusContext';\n\nexport default function BlogPostPageWrapper(props) {\n  const { siteConfig } = useDocusaurusContext();\n\n  /** @type {import('@docusaurus/plugin-content-blog').BlogPostMetadata} */ const blogMetaData =\n    props.content.metadata;\n\n  // https://developers.google.com/search/docs/appearance/structured-data/breadcrumb#json-ld\n  const archiveBreadcrumbStructuredData = {\n    '@context': 'https://schema.org',\n    '@type': 'BreadcrumbList',\n    name: 'Archive breadcrumb',\n    itemListElement: [\n      {\n        '@type': 'ListItem',\n        position: 1,\n        name: 'Home',\n        item: siteConfig.url,\n      },\n      {\n        '@type': 'ListItem',\n        position: 2,\n        name: 'Archive',\n        item: `${siteConfig.url}/archive`,\n      },\n      {\n        '@type': 'ListItem',\n        position: 3,\n        name: blogMetaData.title,\n      },\n    ],\n  };\n\n  const tagsBreadcrumbStructuredData = blogMetaData.tags.map((tag) => ({\n    '@context': 'https://schema.org',\n    '@type': 'BreadcrumbList',\n    name: `Tags ${tag.label} breadcrumb`,\n    itemListElement: [\n      {\n        '@type': 'ListItem',\n        position: 1,\n        name: 'Home',\n        item: siteConfig.url,\n      },\n      {\n        '@type': 'ListItem',\n        position: 2,\n        name: 'Tags',\n        item: `${siteConfig.url}/tags`,\n      },\n      {\n        '@type': 'ListItem',\n        position: 3,\n        name: tag.label,\n        item: `${siteConfig.url}${tag.permalink}`,\n      },\n      {\n        '@type': 'ListItem',\n        position: 4,\n        name: blogMetaData.title,\n      },\n    ],\n  }));\n\n  const breadcrumbStructuredData = [\n    archiveBreadcrumbStructuredData,\n    ...tagsBreadcrumbStructuredData,\n  ];\n\n  return (\n    <>\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify(breadcrumbStructuredData),\n        }}\n      />\n      <BlogPostPage {...props} />\n    </>\n  );\n}\n")),(0,r.kt)("p",null,"Again, we're constructing a JSON-LD Structured Data object that represents a breadcrumb. But this time we're going to add multiple breadcrumbs to the page. The first is the archive breadcrumb. The other breadcrumbs are generated for each tag."),(0,r.kt)("p",null,"I'm somewhat on the fence as to whether it's useful to have a breadcrumb for each tag. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/johnnyreilly/blog.johnnyreilly.com/pull/416"},"In fact, originally I didn't have it when I first added support"),". But I've added it in as it's not a lot of work and it's not a lot of code. I'm not sure if it's useful or not. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/johnnyreilly/blog.johnnyreilly.com/commit/e69633ca6cc6cae98cd405580e9659594ac92f8a"},"I've added it now"),"; I'm going to leave it in in place for a bit and see how it goes."),(0,r.kt)("h2",{id:"using-the-rich-results-test-to-validate-the-breadcrumbs"},"Using the Rich Results test to validate the breadcrumbs"),(0,r.kt)("p",null,"Once we've shipped the changes we can test them using the ",(0,r.kt)("a",{parentName:"p",href:"https://search.google.com/test/rich-results"},"Google Rich Results Test"),". The screenshot below was taken after I'd deployed the changes and ",(0,r.kt)("a",{parentName:"p",href:"https://search.google.com/test/rich-results?url=https%3A%2F%2Fjohnnyreilly.com%2Fdirectory-build-props-c-sharp-9-for-all"},"the test was run"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"lazy",alt:"screenshot of the Rich Results Test featuring article and breadcrumbs",src:a(40292).Z,width:"1043",height:"810"})),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"lazy",alt:"screenshot of the Rich Results Test featuring the specific 4 breadcrumbs",src:a(66959).Z,width:"1044",height:"840"})),(0,r.kt)("p",null,"We can also check the breadcrumbs in the ",(0,r.kt)("a",{parentName:"p",href:"https://search.google.com/search-console/r/breadcrumbs"},"Google Search Console"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"lazy",alt:"Screenshot of the Google search console",src:a(94712).Z,width:"1053",height:"860"})),(0,r.kt)("p",null,"So that's it, now we have breadcrumbs on the blog posts."),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,'This is a useful addition to the blog. I\'d like it more if it was a physical breadcrumb as well; not just an "invisible" one. ',(0,r.kt)("a",{parentName:"p",href:"https://docusaurus.io/feature-requests/p/add-breadcrumb-for-blog-posts"},"I've opened an issue with Docusaurus to see if that's possible"),". I would imagine, if that does get added, it would likely be a single breadcrumb rather than multiple ones. But let me not preempt; let's see what comes of it."))}g.isMDXComponent=!0},66959:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/screenshot-google-rich-results-test-breadcrumbs-breakdown-7c784707aa30b741a8d1910abdd2738f.png"},40292:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/screenshot-google-rich-results-test-breadcrumbs-11885edfb2bbd57f6a5b30155b6cae25.webp"},94712:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/screenshot-google-search-console-breadcrumbs-7f4b06a345be9e6b2154662089fc79b5.webp"},52410:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/screenshot-google-search-results-breadcrumbs-52876f7da35364e23a3e878bef810fd0.webp"},11954:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/title-image-e80a4fa94841330420bfb9d28d8d0f1e.png"}}]);