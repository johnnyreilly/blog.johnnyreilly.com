"use strict";(self.webpackChunkjohnnyreilly_com=self.webpackChunkjohnnyreilly_com||[]).push([[48160],{23815:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>p});var o=i(74848),t=i(28453);const s={slug:"azure-app-service-web-app-containers-asp-net-nested-configuration",title:"Azure App Service: nested configuration for ASP.NET running in Web App for Containers using Application Settings",authors:"johnnyreilly",tags:[],image:"./appservice_classic.webp",hide_table_of_contents:!1,description:"Learn how to configure an ASP.NET application in Azure App Service Web App for Containers without colons. Use a double underscore instead."},r=void 0,a={permalink:"/azure-app-service-web-app-containers-asp-net-nested-configuration",editUrl:"https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2018-07-28-azure-app-service-web-app-containers-asp-net-nested-configuration/index.md",source:"@site/blog/2018-07-28-azure-app-service-web-app-containers-asp-net-nested-configuration/index.md",title:"Azure App Service: nested configuration for ASP.NET running in Web App for Containers using Application Settings",description:"Learn how to configure an ASP.NET application in Azure App Service Web App for Containers without colons. Use a double underscore instead.",date:"2018-07-28T00:00:00.000Z",tags:[],readingTime:1.895,hasTruncateMarker:!0,authors:[{name:"John Reilly",title:"OSS Engineer - TypeScript, Azure, React, Node.js, .NET",url:"https://johnnyreilly.com/about",imageURL:"https://johnnyreilly.com/img/profile.jpg",key:"johnnyreilly",page:null}],frontMatter:{slug:"azure-app-service-web-app-containers-asp-net-nested-configuration",title:"Azure App Service: nested configuration for ASP.NET running in Web App for Containers using Application Settings",authors:"johnnyreilly",tags:[],image:"./appservice_classic.webp",hide_table_of_contents:!1,description:"Learn how to configure an ASP.NET application in Azure App Service Web App for Containers without colons. Use a double underscore instead."},unlisted:!1,prevItem:{title:"Using TypeScript and webpack alias: goodbye relative paths",permalink:"/typescript-webpack-alias-goodbye-relative-paths"},nextItem:{title:"Cypress and Auth0",permalink:"/cypress-and-auth0"}},c={image:i(72799).A,authorsImageUrls:[void 0]},p=[{value:"Containers on App Service",id:"containers-on-app-service",level:2},{value:"The Mystery of Configuration",id:"the-mystery-of-configuration",level:2},{value:"How do we configure without colons?",id:"how-do-we-configure-without-colons",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["How can we configure an ASP.NET application with nested properties ",(0,o.jsx)(n.a,{href:"https://azure.microsoft.com/en-gb/services/app-service/containers/",children:"Azure App Service Web App for Containers"})," using Application Settings in Azure? Colons don't work."]}),"\n",(0,o.jsx)(n.h2,{id:"containers-on-app-service",children:"Containers on App Service"}),"\n",(0,o.jsxs)(n.p,{children:["App Services have long been a super simple way to spin up a web app in Azure. The barrier to entry is low, maintenance is easy. It just works. App Services recently got a turbo boost in the form of ",(0,o.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/app-service/containers/app-service-linux-intro",children:"Azure App Service on Linux"}),". Being able to deploy to Linux is exciting enough; but another reason this is notable because ",(0,o.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/app-service/containers/tutorial-custom-docker-image",children:"you can deploy Docker images that will be run as app services"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"I cannot over-emphasise just how easy this makes getting a Docker image into Production. Yay Azure!"}),"\n",(0,o.jsx)(n.h2,{id:"the-mystery-of-configuration",children:"The Mystery of Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Applications need configuration. ASP.Net Core applications are typically configured by an ",(0,o.jsx)(n.code,{children:"appsettings.json"})," file which might look like so:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "Parent": {\n    "ChildOne": "I\'m a little teapot",\n    "ChildTwo": "Short and stout"\n  }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["With a classic App Service you could override a setting in the ",(0,o.jsx)(n.code,{children:"appsettings.json"}),' by updating "Application settings" within the Azure portal. You\'d do this in the style of creating an Application setting called ',(0,o.jsx)(n.code,{children:"Parent:ChildOne"})," or ",(0,o.jsx)(n.code,{children:"Parent:ChildTwo"}),". To be clear: using colons to target a specific piece of config."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"screenshot of an App Service Application Settings in the Azure Portal, nested properties configured using colons",src:i(3258).A+"",width:"640",height:"336",loading:"eager",fetchpriority:"high"})}),"\n",(0,o.jsxs)(n.p,{children:["You can read about this approach ",(0,o.jsx)(n.a,{href:"https://blogs.msdn.microsoft.com/waws/2018/06/12/asp-net-core-settings-for-azure-app-service/",children:"here"}),". Now there's something I want you to notice; consider the colons below:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"screenshot of an App Service specific Application Setting nested property configured using colons - all good",src:i(53834).A+"",width:"584",height:"96",loading:"lazy"})}),"\n",(0,o.jsxs)(n.p,{children:["If you try and follow the same steps when you're using Web App for Containers / i.e. ",(0,o.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/app-service/containers/app-service-linux-intro",children:"a Docker image deployed to an Azure App Service on Linux "})," you ",(0,o.jsx)(n.strong,{children:"cannot"})," use colons:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"screenshot of a Web App for Containers specific Application Setting nested property configured using colons - errors",src:i(55562).A+"",width:"640",height:"65",loading:"lazy"})}),"\n",(0,o.jsxs)(n.p,{children:["When you hover over the error you see this message: ",(0,o.jsx)(n.code,{children:'This field can only contain letters, numbers (0-9), periods ("."), and underscores ("_")'}),". Using ",(0,o.jsx)(n.code,{children:"."})," does not work alas."]}),"\n",(0,o.jsx)(n.h2,{id:"how-do-we-configure-without-colons",children:"How do we configure without colons?"}),"\n",(0,o.jsxs)(n.p,{children:["It's simple. Where you would use ",(0,o.jsx)(n.code,{children:":"})," on a classic App Service, you should use a ",(0,o.jsx)(n.code,{children:"__"})," (double underscore) on an App Service with containers. So ",(0,o.jsx)(n.code,{children:"Parent__ChildOne"})," instead of ",(0,o.jsx)(n.code,{children:"Parent:ChildOne"}),". It's as simple as that."]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},72799:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/appservice_classic-7949df2dfffa3df9e73d643cd6bc1d3b.webp"},3258:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/appservice_classic-7949df2dfffa3df9e73d643cd6bc1d3b.webp"},53834:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/appservice_colons_fine-f02bf4ae673e1605e0a683ff525af590.png"},55562:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/appservice_container_colons_bad-9cac2407b620440ced783f7350707e1d.webp"},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var o=i(96540);const t={},s=o.createContext(t);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);