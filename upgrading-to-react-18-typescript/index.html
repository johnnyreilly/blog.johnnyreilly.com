<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-rc.1">
<title data-rh="true">Upgrading to React 18 with TypeScript | johnnyreilly</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://johnnyreilly.com/upgrading-to-react-18-typescript"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="robots" content="max-image-preview:large"><meta data-rh="true" name="monetization" content="$ilp.uphold.com/LwQQhXdpwxeJ"><meta data-rh="true" property="og:title" content="Upgrading to React 18 with TypeScript | johnnyreilly"><meta data-rh="true" name="description" content="The upgrade of the React type definitions to support React 18 involved some significant breaking changes. This post the upgrade path."><meta data-rh="true" property="og:description" content="The upgrade of the React type definitions to support React 18 involved some significant breaking changes. This post the upgrade path."><meta data-rh="true" property="og:image" content="https://res.cloudinary.com/priou/image/fetch/f_auto,q_auto,w_auto,dpr_auto/https://johnnyreilly.com/assets/images/title-image-4dd9b1a8a94b8d60d914d0a504c6f9e2.png"><meta data-rh="true" name="twitter:image" content="https://res.cloudinary.com/priou/image/fetch/f_auto,q_auto,w_auto,dpr_auto/https://johnnyreilly.com/assets/images/title-image-4dd9b1a8a94b8d60d914d0a504c6f9e2.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-05-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://johnnyreilly.com/about"><meta data-rh="true" property="article:tag" content="react,definitely typed,typescript"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="alternate" href="https://johnnyreilly.com/upgrading-to-react-18-typescript" hreflang="en"><link data-rh="true" rel="alternate" href="https://johnnyreilly.com/upgrading-to-react-18-typescript" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J3MYR1INLT-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://blog.logrocket.com/upgrading-react-18-typescript/"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="johnnyreilly" href="/opensearch.xml">

<link rel="icon" href="/img/profile-64x64.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#3578e5">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="preload" href="https://johnnyreilly.com/fonts/Poppins-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://johnnyreilly.com/fonts/Poppins-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preconnect" href="https://res.cloudinary.com">
<link rel="monetization" href="https://ilp.uphold.com/LwQQhXdpwxeJ">
<script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@id":"https://johnnyreilly.com","@type":"WebSite","url":"https://johnnyreilly.com","name":"johnnyreilly","description":"This is John Reilly's blog. John is an Open Source Software Engineer working on TypeScript, Azure, React, Node.js, .NET and more.","copyrightHolder":{"@id":"https://johnnyreilly.com/about"},"publisher":{"@id":"https://johnnyreilly.com/about"},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://johnnyreilly.com/search?q={search_term_string}"},"query-input":"required name=search_term_string"},"inLanguage":"en-UK"},{"@id":"https://johnnyreilly.com/about","@type":"Person","name":"John Reilly","alternateName":"Johnny Reilly","image":{"@type":"ImageObject","inLanguage":"en-UK","@id":"https://johnnyreilly.com/about#image","url":"https://johnnyreilly.com/img/profile.jpg","contentUrl":"https://johnnyreilly.com/img/profile.jpg","width":200,"height":200,"caption":"John Reilly"},"description":"John is an Open Source Software Engineer working on TypeScript, Azure, React, Node.js, .NET and more. As well as writing code, John is a speaker at meetups, one of the founders of the TS Congress conference, and the author of the history of Definitely Typed, which he worked on in the early days of TypeScript.","url":"https://johnnyreilly.com","address":{"@type":"PostalAddress","streetAddress":"Twickenham","addressLocality":"London","addressCountry":"United Kingdom"},"email":"johnny_reilly@hotmail.com","birthPlace":"Bristol","sameAs":["https://github.com/johnnyreilly","https://fosstodon.org/@johnny_reilly","https://twitter.com/johnny_reilly","https://dev.to/johnnyreilly","https://app.daily.dev/johnnyreilly","https://stackoverflow.com/users/761388/john-reilly","https://blog.logrocket.com/author/johnreilly/","https://polywork.com/johnnyreilly","https://uk.linkedin.com/in/johnnyreilly"]},{"@id":"https://johnnyreilly.com/about#organization","@type":["Organization","Brand"],"url":"https://johnnyreilly.com","name":"johnnyreilly","description":"This is John Reilly's blog. John is an Open Source Software Engineer working on TypeScript, Azure, React, Node.js, .NET and more.","logo":{"@type":"ImageObject","inLanguage":"en-UK","@id":"https://johnnyreilly.com/#logo","url":"https://johnnyreilly.com/img/profile.jpg","contentUrl":"https://johnnyreilly.com/img/profile.jpg","width":200,"height":200,"caption":"John Reilly"},"image":{"@id":"https://johnnyreilly.com/#logo"},"sameAs":["https://github.com/johnnyreilly","https://fosstodon.org/@johnny_reilly","https://twitter.com/johnny_reilly","https://dev.to/johnnyreilly","https://app.daily.dev/johnnyreilly","https://stackoverflow.com/users/761388/john-reilly","https://blog.logrocket.com/author/johnreilly/","https://polywork.com/johnnyreilly","https://uk.linkedin.com/in/johnnyreilly"]}]}</script><link rel="stylesheet" href="/assets/css/styles.2ff0c239.css">
<script src="/assets/js/runtime~main.af937d66.js" defer="defer"></script>
<script src="/assets/js/main.ca86c8d0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","@id":"/upgrading-to-react-18-typescript#breadcrumb","name":"Blog breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://johnnyreilly.com"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://johnnyreilly.com/blog"},{"@type":"ListItem","position":3,"name":"Upgrading to React 18 with TypeScript"}]}]</script><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile-64x64.jpg" alt="Profile picture of John Reilly" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/img/profile-64x64.jpg" alt="Profile picture of John Reilly" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">John Reilly</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://fosstodon.org/@johnny_reilly" target="_blank" rel="me" class="navbar__item navbar__link">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/migrating-azure-functions-node-js-v4-typescript">Migrating to v4 Azure Functions Node.js with TypeScript</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/bicep-link-azure-application-insights-to-static-web-apps">Bicep: Link Azure Application Insights to Static Web Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docusaurus-3-how-to-migrate-rehype-plugins">Docusaurus 3: how to migrate rehype plugins</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure-open-ai-generate-article-metadata-with-typescript">Azure Open AI: generate article metadata with TypeScript</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/typescript-documentary">TypeScript: The Movie</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure-open-ai-capacity-quota-bicep">Azure Open AI: handling capacity and quota limits with Bicep</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure-pipelines-meet-vitest">Azure Pipelines meet Vitest</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure-container-apps-bicep-bring-your-own-certificates-custom-domains">Azure Container Apps, Bicep, bring your own certificates and custom domains</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="The upgrade of the React type definitions to support React 18 involved some significant breaking changes. This post the upgrade path."><link itemprop="image" href="https://johnnyreilly.com/assets/images/title-image-4dd9b1a8a94b8d60d914d0a504c6f9e2.png"><header><h1 class="title_f1Hy" itemprop="headline">Upgrading to React 18 with TypeScript</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-05-01T00:00:00.000Z" itemprop="datePublished">May 1, 2022</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://johnnyreilly.com/about" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://johnnyreilly.com/img/profile.jpg" alt="John Reilly" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://johnnyreilly.com/about" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div><small class="avatar__subtitle" itemprop="description">OSS Engineer - TypeScript, Azure, React, Node.js, .NET</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>The upgrade of the React type definitions to support React 18 involved some significant breaking changes. This post digs into that and examines what the upgrade path looks like.</p>
<p><img loading="eager" alt="title image reading &amp;quot;Upgrading to React 18 with TypeScript&amp;quot; with the React, TypeScript and Definitely Typed logos`" src="/assets/images/title-image-4dd9b1a8a94b8d60d914d0a504c6f9e2.png" width="1600" height="900" fetchpriority="high" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-18-and-definitely-typed">React 18 and Definitely Typed<a href="#react-18-and-definitely-typed" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>After a significant period of time in alpha / beta, <a href="https://reactjs.org/blog/2022/03/29/react-v18.html" target="_blank" rel="noopener noreferrer">React 18 shipped on March 29th 2022</a>. Since the first alpha was released, <a href="https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/" target="_blank" rel="noopener noreferrer">support has been available in TypeScript</a>. This has been made possible through the type definitions at <a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noopener noreferrer">Definitely Typed</a>, the repository for high quality TypeScript type definitions. It&#x27;s particularly down to the fine work of <a href="https://twitter.com/sebsilbermann" target="_blank" rel="noopener noreferrer">Sebastian Silbermann</a> who has put a lot of work into the React 18 definitions.</p>
<p>Now that React 18 has shipped, <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/56210" target="_blank" rel="noopener noreferrer">the type definitions for React 18 were updated in Sebastian&#x27;s pull request</a>. Many projects have been, and will be, broken by this change. This post will look at what that breakage can look like and how to resolve it.</p>
<p>Before we do that, let&#x27;s first consider the problem of Definitely Typed and <a href="http://semver.org/" target="_blank" rel="noopener noreferrer">semantic versioning</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="definitely-typed-and-semantic-versioning">Definitely Typed and semantic versioning<a href="#definitely-typed-and-semantic-versioning" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>People are used to the idea of semantic versioning in the software they consume. They expect a major version bump to indicate breaking changes. This is exactly what React has just done by incrementing from v17 to v18.</p>
<p><strong>Definitely Typed does not support semantic versioning.</strong></p>
<p>This is not out of spite. This is because DT intentionally publishes type definitions to npm, under the scope of <code>@types</code>. So, for example, the type definitions of React are published to <a href="https://www.npmjs.com/package/@types/react" target="_blank" rel="noopener noreferrer"><code>@types/react</code></a>.</p>
<p>It&#x27;s important to be aware that npm is built on top of semantic versioning. To make consumption of type definitions easier, the versioning of a type definition package will seek to emulate the versioning of the npm package it supports. So for <a href="https://www.npmjs.com/package/react" target="_blank" rel="noopener noreferrer"><code>react</code></a> <code>18.0.0</code>, the corresponding type definition would be <a href="https://www.npmjs.com/package/@types/react" target="_blank" rel="noopener noreferrer"><code>@types/react</code></a>&#x27;s <code>18.0.0</code>.</p>
<p>If there&#x27;s a breaking change to the <code>@types/react</code> type definition (or any other for that matter) then the new version published will not increment the major or minor version numbers. The increment will be applied to the patch number alone. This is done to maintain the simpler consumption model of types through npm.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-18---breaking-type-changes">React 18 - breaking type changes<a href="#react-18---breaking-type-changes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>All that said, for very widely used type definitions, it&#x27;s not unusual to at least make an effort towards minimising breaking changes where that is possible.</p>
<p>As an aside, it&#x27;s interesting to know that the Definitely Typed automation tooling splits type definitions into three categories: <a href="https://github.com/DefinitelyTyped/dt-mergebot/blob/5485345b210a4baf8e63376a930554bf2b7dd311/src/basic.ts#L11-L14" target="_blank" rel="noopener noreferrer">&quot;Well-liked by everyone&quot;, &quot;Popular&quot; and &quot;Critical&quot;</a>. Thanks <a href="https://twitter.com/atcb/status/1438559981838626817" target="_blank" rel="noopener noreferrer">Andrew Branch for sharing that</a>! React, being very widely used, is considered &quot;Critical&quot;.</p>
<p>When Sebastian submitted <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/56210" target="_blank" rel="noopener noreferrer">a pull request to upgrade the TypeScript React type definitions</a>, the opportunity was taken to make breaking changes. These were not all directly related to React 18. Many were fixing long standing issues with the React type definitions.</p>
<p>Sebastian&#x27;s write up on the PR is excellent and I&#x27;d encourage you to read it. Here is a summary of the breaking changes:</p>
<ol>
<li>Removal of implicit children</li>
<li>Remove <code>{}</code> from <code>ReactFragment</code> (related to 1.)</li>
<li><code>this.context</code> becomes <code>unknown</code></li>
<li>Using <code>noImplicitAny</code> now enforces a type is supplied with <code>useCallback</code></li>
<li>Remove deprecated types to align with official React ones</li>
</ol>
<p>Of the above, the removal of implicit children is the most breaking of the changes and <a href="https://solverfox.dev/writing/no-implicit-children" target="_blank" rel="noopener noreferrer">Sebastian wrote a blog post to explain the rationale</a>. He was also good enough to write a <a href="https://github.com/eps1lon/types-react-codemod" target="_blank" rel="noopener noreferrer">codemod to help</a>.</p>
<p>With that in mind, let&#x27;s go upgrade a codebase to React 18!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading">Upgrading<a href="#upgrading" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>To demonstrate what upgrading looks like, I&#x27;m going to upgrade my aunt&#x27;s website. It&#x27;s a fairly simple site, and the pull request for the upgrade <a href="https://github.com/johnnyreilly/poor-clares-arundel-koa/pull/69" target="_blank" rel="noopener noreferrer">can be found here</a>.</p>
<p>The first thing to do is upgrade React itself in the <code>package.json</code>:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted prefix deleted" style="color:#f92672;font-style:italic">-</span><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic">    &quot;react&quot;: &quot;^17.0.0&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic"></span><span class="token deleted-sign deleted prefix deleted" style="color:#f92672;font-style:italic">-</span><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic">    &quot;react-dom&quot;: &quot;^17.0.0&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(173, 219, 103);font-style:italic">+</span><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic">    &quot;react&quot;: &quot;^18.0.0&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(173, 219, 103);font-style:italic">+</span><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic">    &quot;react-dom&quot;: &quot;^18.0.0&quot;,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next we&#x27;ll upgrade our type definitions:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted prefix deleted" style="color:#f92672;font-style:italic">-</span><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic">    &quot;@types/react&quot;: &quot;^17.0.0&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic"></span><span class="token deleted-sign deleted prefix deleted" style="color:#f92672;font-style:italic">-</span><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic">    &quot;@types/react-dom&quot;: &quot;^17.0.0&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(173, 219, 103);font-style:italic">+</span><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic">    &quot;@types/react&quot;: &quot;^18.0.0&quot;,</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(173, 219, 103);font-style:italic">+</span><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic">    &quot;@types/react-dom&quot;: &quot;^18.0.0&quot;,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When you install your dependencies, do check your lock file (<code>yarn.lock</code> / <code>package-lock.json</code> etc). It&#x27;s important that you only have <code>@types/react</code> and <code>@types/react-dom</code> packages which are version 18+ listed.</p>
<p>Now that your install has completed, we start to see the following error message:</p>
<blockquote>
<p>Property &#x27;children&#x27; does not exist on type &#x27;LoadingProps&#x27;.ts(2339)</p>
</blockquote>
<p>... In the following code:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">LoadingProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">// you&#x27;ll note there&#x27;s no `children` prop here - this is what&#x27;s prompting the error message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  noHeader</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">boolean</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// if props.noHeader is false then this component returns just the icon and a message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// if props.noHeader is true then this component returns the same but wrapped in an h1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token maybe-class-name">Loading</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access maybe-class-name">FunctionComponent</span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token maybe-class-name">LoadingProps</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#66d9ef">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  props</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">noHeader</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">FontAwesomeIcon</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">icon</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">faSnowflake</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">spin</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"> Loading </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">h1</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">loader</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag class-name" style="color:#e6db74">FontAwesomeIcon</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">icon</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#f8f8f2">=</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">{</span><span class="token tag script language-javascript" style="color:#f92672">faSnowflake</span><span class="token tag script language-javascript punctuation" style="color:#f8f8f2">}</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">spin</span><span class="token tag" style="color:#f92672"> </span><span class="token tag punctuation" style="color:#f8f8f2">/&gt;</span><span class="token plain-text"> Loading </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain-text"> ...</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">h1</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="screenshot of the above code snippet with &amp;quot;Property &amp;#39;children&amp;#39; does not exist on type &amp;#39;LoadingProps&amp;#39;.ts(2339)&amp;quot; displayed over the props.children" src="/assets/images/screenshot-no-children-d7923b56dd33dd95c0dc45ebea500805.png" width="1832" height="651" class="img_ev3q"></p>
<p>What we&#x27;re seeing here is the &quot;removal of implicit children&quot; in action. Before we did the upgrade, all <code>React.Component</code> and <code>React.FunctionComponent</code>s had a <code>children</code> property in place which allowed React users to use this without declaring it. This is no longer the case. If you have a component with <code>children</code> you have to explicitly declare them.</p>
<p>In my case, I could fix the issue by adding a <code>children</code> property directly:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">LoadingProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  noHeader</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">boolean</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  children</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token builtin" style="color:#e6db74">string</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But why write code when you can get someone else to write it on your behalf?</p>
<p>Let&#x27;s make use of <a href="https://github.com/eps1lon/types-react-codemod" target="_blank" rel="noopener noreferrer">Sebastian&#x27;s codemod</a> instead. To do that we simply enter the following command:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">npx types-react-codemod preset-18 ./src</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When it runs you should find yourself with a prompt which says something like this:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">? Pick transforms to apply </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Press </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">space</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> to select, </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">a</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> to toggle all, </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">i</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> to invert selection, and </span><span class="token operator" style="color:#66d9ef">&lt;</span><span class="token plain">enter</span><span class="token operator" style="color:#66d9ef">&gt;</span><span class="token plain"> to proceed</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">❯◉ context-any</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> ◉ deprecated-react-type</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> ◉ deprecated-sfc-element</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> ◉ deprecated-sfc</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> ◉ deprecated-stateless-component</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> ◉ implicit-children</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"> ◉ useCallback-implicit-any</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="screenshot of the terminal prompt above" src="/assets/images/screenshot-codemod-in-action-82e961f8e497535e5c5bb07235ea3ace.png" width="1960" height="290" class="img_ev3q"></p>
<p>I&#x27;m going to select <code>a</code> and let the codemod run. For my own project, 37 files are updated. It&#x27;s the same modification for all files. In each case, a components props are wrapped by <code>React.PropsWithChildren</code>. Let&#x27;s look at what that looks like for our <code>Loading</code> component:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted prefix deleted" style="color:#f92672;font-style:italic">-</span><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic">const Loading: React.FunctionComponent&lt;LoadingProps&gt; = (props) =&gt;</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token deleted-sign deleted line" style="color:#f92672;font-style:italic"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(173, 219, 103);font-style:italic">+</span><span class="token inserted-sign inserted line" style="color:rgb(173, 219, 103);font-style:italic">const Loading: React.FunctionComponent&lt;React.PropsWithChildren&lt;LoadingProps&gt;&gt; = (props) =&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>PropsWithChildren</code> is very simple; it just adds <code>children</code> back, like so:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">type</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">PropsWithChildren</span><span class="token class-name operator" style="color:#66d9ef">&lt;</span><span class="token class-name constant" style="color:#e6db74">P</span><span class="token class-name operator" style="color:#66d9ef">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token constant" style="color:#e6db74">P</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> children</span><span class="token operator" style="color:#66d9ef">?</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> ReactNode </span><span class="token operator" style="color:#66d9ef">|</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">undefined</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This resolves the compilation issues we were having earlier; no type issues are reported anymore.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-up">Wrapping up<a href="#wrapping-up" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>We now understand how the breaking type changes came to present with React 18, and we know how to upgrade our codebase using the handy codemod. Thanks <a href="https://twitter.com/sebsilbermann" target="_blank" rel="noopener noreferrer">Sebastian Silbermann</a> for not only putting this work into getting the type definitions in the best state they could be, and making it easier for the community to upgrade.</p>
<p><a href="https://blog.logrocket.com/upgrading-react-18-typescript/" target="_blank" rel="noopener noreferrer">This post was originally published on LogRocket.</a></p>
</div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/react">react</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/definitely-typed">definitely typed</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/typescript">typescript</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/2022-05-01-upgrading-to-react-18-typescript/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/static-web-apps-azure-devops-named-preview-environments"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Azure Static Web Apps: named preview environments with Azure DevOps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/type-annotations-proposal-strong-types-weakly-held"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Type annotations: strong types, weakly held</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#react-18-and-definitely-typed" class="table-of-contents__link toc-highlight">React 18 and Definitely Typed</a></li><li><a href="#definitely-typed-and-semantic-versioning" class="table-of-contents__link toc-highlight">Definitely Typed and semantic versioning</a></li><li><a href="#react-18---breaking-type-changes" class="table-of-contents__link toc-highlight">React 18 - breaking type changes</a></li><li><a href="#upgrading" class="table-of-contents__link toc-highlight">Upgrading</a></li><li><a href="#wrapping-up" class="table-of-contents__link toc-highlight">Wrapping up</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><div class="footer__title"><a href="/tags/typescript" class="footer__link-item">TypeScript<img src="/img/ts-logo-128.svg" alt="TypeScript icon" class="footer__icon"></a></div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="/typescript-vs-jsdoc-javascript" class="footer__link-item">TypeScript vs JSDoc JavaScript</a></li><li class="footer__item"><a href="/type-annotations-strong-types-weakly-held" class="footer__link-item">Type annotations proposal: strong types, weakly held</a></li>
</ul><div class="footer__title"><a href="/tags/azure" class="footer__link-item">Azure<img src="/img/azure-logo.svg" alt="Azure icon" class="footer__icon"></a></div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="/azure-container-apps-easy-auth-and-dotnet-authentication" class="footer__link-item">Azure Container Apps: Easy Auth and .NET</a></li><li class="footer__item"><a href="/azure-static-web-apps-dynamic-redirects-azure-functions" class="footer__link-item">Azure Static Web Apps: dynamic redirects with Azure Functions</a></li>
</ul><div class="footer__title"><a href="/tags/asp-net" class="footer__link-item">ASP.NET<img src="/img/dotnet-logo.svg" alt="ASP.NET icon" class="footer__icon"></a></div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="/eslint-your-csharp-in-vs-code-with-roslyn-analyzers" class="footer__link-item">ESLint your C# with Roslyn Analyzers</a></li><li class="footer__item"><a href="/aspnet-serilog-and-application-insights" class="footer__link-item">ASP.NET, Serilog and Application Insights</a></li>
</ul><div class="footer__title"><a href="/tags/react" class="footer__link-item">React<img src="/img/react-logo.svg" alt="React icon" class="footer__icon"></a></div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="/structured-data-seo-and-react" class="footer__link-item">Structured data and React</a></li><li class="footer__item"><a href="/react-usesearchparamsstate" class="footer__link-item">React: storing state in URL with URLSearchParams</a></li>
</ul></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><div class="footer__title">Notable articles</div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="/definitely-typed-the-movie" class="footer__link-item">The history of Definitely Typed<img src="/img/definitely-typed-logo.png" alt="The history of Definitely Typed icon" class="footer__icon"></a></li><li class="footer__item"><a href="/typescript-documentary" class="footer__link-item">TypeScript: the documentary<img src="/img/ts-logo-128.svg" alt="TypeScript: the documentary icon" class="footer__icon"></a></li><li class="footer__item"><a href="/definitive-guide-to-migrating-from-blogger-to-docusaurus" class="footer__link-item">The definitive guide to migrating from Blogger to Docusaurus<img src="/img/docusaurus-logo.svg" alt="The definitive guide to migrating from Blogger to Docusaurus icon" class="footer__icon"></a></li><li class="footer__item"><a href="/teams-notification-webhooks" class="footer__link-item">Teams notification webhooks</a></li>
</ul><div class="footer__title">Popular articles</div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="/aspnet-serilog-and-application-insights" class="footer__link-item">ASP.NET, Serilog and Application Insights</a></li><li class="footer__item"><a href="/eslint-your-csharp-in-vs-code-with-roslyn-analyzers" class="footer__link-item">ESLint your C# with Roslyn Analyzers</a></li><li class="footer__item"><a href="/prettier-your-csharp-with-dotnet-format-and-lint-staged" class="footer__link-item">dotnet-format: Prettier your C# with lint-staged & husky</a></li>
</ul><div class="footer__title">Recently updated</div>
<ul class="footer__items clean-list">
  <li class="footer__item"><a href="output-connection-strings-and-keys-from-azure-bicep" class="footer__link-item">Output connection strings and keys from Azure Bicep</a></li><li class="footer__item"><a href="docusaurus-3-how-to-migrate-rehype-plugins" class="footer__link-item">Docusaurus 3: how to migrate rehype plugins</a></li><li class="footer__item"><a href="docusaurus-createfeeditems-api-git-commit-date" class="footer__link-item">Docusaurus blogs: using the createFeedItems API with git commit date</a></li>
</ul></li></ul></div><div class="col footer__col"><div class="footer__title">Learn more / support me</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog source code on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Blog categories</a></li><li class="footer__item"><a href="https://johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSS feed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Atom feed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-policy">Privacy Policy</a></li><li class="footer__item"><iframe src="https://github.com/sponsors/johnnyreilly/card" title="Sponsor johnnyreilly" style="margin-top: 20px; border: 0; border-radius: 10px; background-color: white; min-height: 400px;"></iframe></li><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" rel="noopener" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" loading="lazy" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2012 - 2023 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>